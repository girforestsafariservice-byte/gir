<!DOCTYPE html>
<html lang="en-IN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gallery | The Gir Travel Company — Diu • Gir • Junagadh • Velavadar • Kutch</title>
  <meta name="description" content="Photo gallery from Diu, Gir, Junagadh, Velavadar and Kutch — wildlife, sacred coast, heritage, cuisine and desert landscapes. All images from real journeys curated by The Gir Travel Company." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

  <style>
    /* ======= Tokens (match final design) ======= */
    :root{
      --maroon:#6E0C2E; --maroon-700:#4C081F; --maroon-900:#2A0512;
      --gold:#D4AF37; --gold-700:#B48E1A; --ivory:#FAF7F2; --ink:#121212; --muted:#6B7280;
      --ring:0 0 0 3px rgba(212,175,55,.25);
      --shadow:0 24px 60px rgba(0,0,0,.18);
      --nav-h:72px; --safe-top:env(safe-area-inset-top,0px);
      --max:1200px; --radius:22px;
    }
    @media (min-width:1024px){ :root{ --nav-h:92px; } }

    /* ======= Base ======= */
    *,*::before,*::after{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--ivory);color:var(--ink);line-height:1.6}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .wrap{max-width:var(--max);margin:auto;padding:0 18px}
    .section{padding:88px 0}
    .title{font-family:"Cormorant Garamond",serif;color:var(--maroon-900);font-size:clamp(30px,6vw,46px);margin:0 0 10px;text-align:center;text-wrap:balance}
    .sub{color:var(--muted);text-align:center;margin:0 0 30px}
    .divider{height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent);width:260px;margin:44px auto}

    /* ======= Buttons ======= */
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:.55rem;border-radius:999px;border:1px solid transparent;padding:1rem 1.35rem;font-weight:800;line-height:1;cursor:pointer;transition:transform .18s ease, box-shadow .18s ease, background .18s ease;min-height:48px}
    .btn:focus-visible{outline:none;box-shadow:var(--ring)}
    .btn--royal{background:linear-gradient(135deg,var(--gold),#ffe7a4);color:#2B1A07;box-shadow:0 14px 34px rgba(212,175,55,.45), inset 0 -3px 0 rgba(0,0,0,.18)}
    .btn--royal:hover{transform:translateY(-2px);box-shadow:0 18px 44px rgba(212,175,55,.6), inset 0 -3px 0 rgba(0,0,0,.22)}
    .btn--ghost{background:#fff;border:1px solid #e5e7eb;color:#111}

    /* ======= Header (finalized) ======= */
    .nav{position:fixed;left:0;right:0;top:0;height:var(--nav-h);z-index:1000;display:flex;align-items:center;background:rgba(42,5,18,.55);backdrop-filter:saturate(140%) blur(6px);transition:background .3s, box-shadow .3s}
    .nav.scrolled{background:rgba(42,5,18,.95);box-shadow:0 12px 28px rgba(0,0,0,.28)}
    .nav .inner{max-width:var(--max);margin:auto;padding:0 18px;width:100%;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand img{height:36px}
    @media(min-width:1024px){ .brand img{height:44px} }
    .right{display:flex;align-items:center;gap:18px;margin-left:auto}
    .menu{display:none;gap:22px;align-items:center}
    .menu a{color:#fff;font-weight:600;position:relative;padding:8px 0}
    .menu a:after{content:"";position:absolute;bottom:-6px;left:0;right:0;height:2px;background:var(--gold);transform:scaleX(0);transform-origin:left;transition:transform .25s}
    .menu a:hover:after,.menu a[aria-current="page"]:after{transform:scaleX(1)}
    .actions{display:none}
    .actions .cta{padding:.65rem 1rem;border-radius:999px;background:transparent;border:1px solid rgba(255,255,255,.5);color:#fff;font-weight:800}
    .hamburger{display:flex;width:44px;height:44px;border:1px solid rgba(255,255,255,.45);border-radius:12px;background:rgba(46,5,16,.85);color:#fff;align-items:center;justify-content:center}
    .hamburger svg{width:22px;height:22px}
    @media(min-width:1024px){ .menu{display:flex} .actions{display:block} .hamburger{display:none} }

    /* Mobile panel */
    body.nav-open{overflow:hidden}
    .mobile-panel{position:fixed;inset:0;z-index:9999;background:#6e0c2e!important;transform:translateX(-100%);transition:transform .3s ease;padding:60px 24px;display:flex;flex-direction:column}
    body.nav-open .mobile-panel{transform:translateX(0)}
    .mobile-panel .close-menu{position:absolute;top:16px;right:16px;background:none;border:1px solid rgba(255,255,255,.45);color:#fff;border-radius:10px;width:40px;height:40px;display:grid;place-items:center;font-size:22px;cursor:pointer}
    .mobile-panel a{display:block;color:#fff;font-size:1.15rem;font-weight:600;padding:18px 0;border-bottom:1px solid rgba(255,255,255,.15)}
    .mobile-panel .cta{margin-top:30px;text-align:center;border:0;border-radius:999px;padding:14px;font-weight:800;background:#fff;color:#2A0E12;font-size:1.05rem}

    /* ======= Hero (split, modern) ======= */
    header.hero{position:relative;padding-top:calc(var(--nav-h) + var(--safe-top));background:radial-gradient(1200px 600px at 10% -10%, rgba(212,175,55,.22), transparent 60%), linear-gradient(180deg, rgba(42,5,18,.92), rgba(42,5,18,.82));color:#fff}
    .hero-wrap{max-width:var(--max);margin:auto;display:grid;grid-template-columns:1.05fr .95fr;gap:20px;align-items:center;padding:28px 18px 18px}
    .hero-copy{padding:10px}
    .kicker{letter-spacing:.18em;text-transform:uppercase;color:#f3ead3}
    .hero-title{font-family:"Cormorant Garamond",serif;font-size:clamp(34px,6.8vw,78px);line-height:1.06;margin:.35rem 0}
    .hero-lead{font-size:clamp(15px,3.6vw,20px);color:#f7f2e6;opacity:.96;max-width:56ch}
    .hero-cta{margin-top:18px;display:flex;gap:12px;flex-wrap:wrap}
    .hero-cta .btn{flex:1 1 220px}
    .hero-media{border-radius:24px;overflow:hidden;box-shadow:0 30px 80px rgba(0,0,0,.35);border:1px solid rgba(212,175,55,.22)}
    .hero-media img{width:100%;height:100%;object-fit:cover}
    @media (max-width:900px){ .hero-wrap{grid-template-columns:1fr} .hero-media{order:-1} }

    /* ======= Sticky filter chips ======= */
    .quicknav{position:sticky;top:calc(var(--nav-h) - 1px);z-index:900;background:linear-gradient(180deg,rgba(255,255,255,.98),rgba(255,255,255,.9));backdrop-filter:saturate(140%) blur(6px);padding:10px 0 6px;border-bottom:1px solid rgba(212,175,55,.22)}
    .chips{display:grid;grid-auto-flow:column;grid-auto-columns:max-content;gap:10px;overflow-x:auto;padding:0 18px 6px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}
    .chip{scroll-snap-align:start;display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(212,175,55,.25);border-radius:999px;padding:10px 14px;background:#fff;box-shadow:var(--shadow);white-space:nowrap;cursor:pointer}
    .chip[aria-pressed="true"]{background:linear-gradient(135deg,var(--gold),#ffe7a4);color:#2B1A07;border-color:transparent}

    /* ======= Gallery grid ======= */
    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .tile{background:#fff;border:1px solid rgba(212,175,55,.22);border-radius:16px;overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .thumb{aspect-ratio:4/3;background:#ddd center/cover no-repeat}
    figure{margin:0}
    figcaption{padding:10px 12px;color:#4b5563;font-size:.95rem;display:flex;justify-content:space-between;gap:8px;align-items:center}
    .tag{font-weight:700;color:var(--maroon-900);font-size:.85rem}
    .hidden{display:none!important}

    /* ======= Lightbox ======= */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.92);display:none;align-items:center;justify-content:center;z-index:1200}
    .lightbox.open{display:flex}
    .lb-frame{position:relative;max-width:92vw;max-height:82vh;display:flex;flex-direction:column;gap:10px}
    .lb-img{max-width:92vw;max-height:70vh;border-radius:12px;box-shadow:0 30px 80px rgba(0,0,0,.6)}
    .lb-cap{color:#fff;display:flex;justify-content:space-between;gap:12px;align-items:center;font-size:.98rem}
    .lb-close,.lb-prev,.lb-next{
      position:absolute;top:12px;background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.35);
      color:#fff;border-radius:999px;padding:10px 12px;cursor:pointer;backdrop-filter:blur(4px)
    }
    .lb-close{right:12px}
    .lb-prev,.lb-next{top:50%;transform:translateY(-50%);padding:12px 14px}
    .lb-prev{left:-6px}
    .lb-next{right:-6px}

    /* ======= Invite ======= */
    .invite{background:linear-gradient(135deg,var(--maroon-900),var(--maroon));color:#fff;border-radius:24px;box-shadow:0 28px 70px rgba(42,5,18,.4);border:1px solid rgba(212,175,55,.22);overflow:hidden}
    .invite .head{padding:24px 20px;border-bottom:1px solid rgba(212,175,55,.22);display:flex;gap:16px;align-items:center;background:radial-gradient(900px 420px at 10% -10%, rgba(212,175,55,.2), transparent 60%);flex-wrap:wrap}
    .crest{width:56px;height:56px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(145deg,var(--gold),#ffe3a1);color:#2b1a07}
    .invite h3{font-family:'Cormorant Garamond',serif;font-size:clamp(22px,5.6vw,40px);margin:0}
    .invite .subt{opacity:.96;margin-top:4px}
    .invite .foot{padding:16px 20px}

    /* ======= Mobile tweaks ======= */
    @media (max-width:900px){ .section{padding:72px 0} }
    @media (max-width:640px){ .wrap{padding:0 14px} .section{padding:56px 0} .title{font-size:clamp(28px,8vw,34px)} .btn{min-height:52px} }
  </style>
</head>
<body>

  <!-- ===== HEADER ===== -->
  <nav class="nav" id="nav" aria-label="Primary">
    <div class="inner">
      <a class="brand" href="/" aria-label="The Gir Travel Company home">
        <img src="/assets/logo-white.svg" alt="The Gir Travel Company logo" width="144" height="36" />
      </a>
      <div class="right">
        <div class="menu" role="menubar" aria-label="Main menu">
         <a role="menuitem" href="index.html">Home</a>
          <a role="menuitem" href="safaris.html">Safaris</a>
          <a role="menuitem" href="journeys.html">Journeys</a>
          <a role="menuitem" href="experiences.html">Experiences</a>
          <a role="menuitem" href="gallery.html" aria-current="page">Gallery</a>
          <a role="menuitem" href="about.html">About</a>
          <a role="menuitem" href="policies.html">Policies</a>
          <a role="menuitem" href="contact.html">Contact</a>
        </div>
        <div class="actions">
          <a class="cta" href="enquiry.html">Plan My Journey</a>
        </div>
        <button class="hamburger" id="hamburger" aria-label="Open menu" aria-controls="mobPanel" aria-expanded="false">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile menu -->
  <div class="mobile-panel" id="mobPanel" role="dialog" aria-modal="true" aria-label="Mobile menu" aria-hidden="true">
    <button class="close-menu" id="closeMenu" aria-label="Close menu" title="Close">×</button>
 <a href="index.html">Home</a>
    <a href="safaris.html">Safaris</a>
    <a href="journeys.html">Journeys</a>
    <a href="experiences.html">Experiences</a>
    <a href="gallery.html"aria-current="page">Gallery</a>
    <a href="about.html" >About</a>
    <a href="policies.html">Policies</a>
    <a href="contact.html">Contact</a>
    <a class="cta" href ="enquiry.html">Plan My Journey</a>
  </div>

  <!-- ===== HERO ===== -->
  <header class="hero" aria-label="Gallery hero">
    <div class="hero-wrap">
      <div class="hero-copy">
        <p class="kicker">Diu • Gir • Junagadh • Velavadar • Kutch</p>
        <h1 class="hero-title">Gallery of Royal Gujarat</h1>
        <p class="hero-lead">Wildlife encounters, sacred coasts, heritage lanes, artisan deserts — curated moments from journeys we craft.</p>
        <div class="hero-cta">
          <a class="btn btn--royal" href="#grid">Browse Photos</a>
          <a class="btn btn--ghost" href="/enquiry">Build My Journey</a>
        </div>
      </div>
      <figure class="hero-media" aria-hidden="true">
        <img src="https://images.unsplash.com/photo-1604644401908-113f2a7ed1e6?auto=format&fit=crop&w=2000&q=80" alt="Diu coastal fort under warm light" loading="eager" fetchpriority="high" decoding="async" />
      </figure>
    </div>
  </header>

  <!-- ===== FILTER CHIPS (Diu → Gir → Junagadh → Velavadar → Kutch) ===== -->
  <div class="quicknav" aria-label="Filter gallery by destination">
    <div class="chips" id="filterChips">
      <button class="chip" data-filter="all" aria-pressed="true">All</button>
      <button class="chip" data-filter="Diu">Diu</button>
      <button class="chip" data-filter="Gir">Gir</button>
      <button class="chip" data-filter="Junagadh">Junagadh</button>
      <button class="chip" data-filter="Velavadar">Velavadar</button>
      <button class="chip" data-filter="Kutch">Kutch</button>
    </div>
  </div>

  <!-- ===== GALLERY GRID ===== -->
  <section class="section" id="grid" aria-labelledby="gallery-title">
    <div class="wrap">
      <h2 class="title" id="gallery-title">Photography</h2>
      <p class="sub">Tap any image to view full size. Use arrows or swipe to navigate.</p>

      <div class="gallery" id="galleryGrid">
        <!-- Diu -->
        <figure class="tile" data-cat="Diu">
          <a href="https://images.unsplash.com/photo-1604644401908-113f2a7ed1e6?auto=format&fit=crop&w=2000&q=90" class="open" data-index="0" aria-label="Open image">
            <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1604644401908-113f2a7ed1e6?auto=format&fit=crop&w=800&q=70')"></div>
          </a>
          <figcaption><span>Diu Fort Coastline</span><span class="tag">Diu</span></figcaption>
        </figure>

        <!-- Gir -->
        <figure class="tile" data-cat="Gir">
          <a href="https://images.unsplash.com/photo-1546182990-dffeafbe841d?auto=format&fit=crop&w=2000&q=90" class="open" data-index="1">
            <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1546182990-dffeafbe841d?auto=format&fit=crop&w=800&q=70')"></div>
          </a>
          <figcaption><span>Asiatic Lion Portrait</span><span class="tag">Gir</span></figcaption>
        </figure>

        <!-- Junagadh -->
        <figure class="tile" data-cat="Junagadh">
          <a href="https://images.unsplash.com/photo-1600271886742-f049cd451bba?auto=format&fit=crop&w=2000&q=90" class="open" data-index="2">
            <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1600271886742-f049cd451bba?auto=format&fit=crop&w=800&q=70')"></div>
          </a>
          <figcaption><span>Mahabat Maqbara Details</span><span class="tag">Junagadh</span></figcaption>
        </figure>

        <!-- Velavadar -->
        <figure class="tile" data-cat="Velavadar">
          <a href="https://images.unsplash.com/photo-1600195077079-bc82fcfa79a3?auto=format&fit=crop&w=2000&q=90" class="open" data-index="3">
            <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1600195077079-bc82fcfa79a3?auto=format&fit=crop&w=800&q=70')"></div>
          </a>
          <figcaption><span>Blackbuck in Golden Grass</span><span class="tag">Velavadar</span></figcaption>
        </figure>

        <!-- Kutch -->
        <figure class="tile" data-cat="Kutch">
          <a href="https://images.unsplash.com/photo-1589737683577-8b7965a7ab48?auto=format&fit=crop&w=2000&q=90" class="open" data-index="4">
            <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1589737683577-8b7965a7ab48?auto=format&fit=crop&w=800&q=70')"></div>
          </a>
          <figcaption><span>Rann Horizon at Dusk</span><span class="tag">Kutch</span></figcaption>
        </figure>

        <!-- More (mixed) -->
        <figure class="tile" data-cat="Gir">
          <a href="https://images.unsplash.com/photo-1542131593-3914e7f52a5d?auto=format&fit=crop&w=2000&q=90" class="open" data-index="5">
            <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1542131593-3914e7f52a5d?auto=format&fit=crop&w=800&q=70')"></div>
          </a>
          <figcaption><span>Forest Road at Dawn</span><span class="tag">Gir</span></figcaption>
        </figure>

        <figure class="tile" data-cat="Diu">
          <a href="https://images.unsplash.com/photo-1526772662000-3f88f10405ff?auto=format&fit=crop&w=2000&q=90" class="open" data-index="6">
            <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1526772662000-3f88f10405ff?auto=format&fit=crop&w=800&q=70')"></div>
          </a>
          <figcaption><span>Diu Seafront Promenade</span><span class="tag">Diu</span></figcaption>
        </figure>

        <figure class="tile" data-cat="Junagadh">
          <a href="https://images.unsplash.com/photo-1600195074089-9b1b20f7b7ee?auto=format&fit=crop&w=2000&q=90" class="open" data-index="7">
            <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1600195074089-9b1b20f7b7ee?auto=format&fit=crop&w=800&q=70')"></div>
          </a>
          <figcaption><span>Uparkot Fort Walls</span><span class="tag">Junagadh</span></figcaption>
        </figure>
      </div>

      <div class="divider" aria-hidden="true"></div>
    </div>
  </section>

  <!-- ===== INVITATION ===== -->
  <section class="section" aria-labelledby="cta-title">
    <div class="wrap">
      <div class="invite">
        <div class="head">
          <div class="crest" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="26" height="26" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 7 5 5 4-8 4 8 5-5v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
          </div>
          <div>
            <h3 id="cta-title">Your Royal Invitation</h3>
            <div class="subt">Share your dates & style — we’ll weave Diu, Gir, Junagadh, Velavadar, and Kutch into one seamless journey.</div>
          </div>
        </div>
        <div class="foot">
          <a class="btn btn--royal" href="/enquiry">Accept Invitation</a>
        </div>
      </div>
      <div class="divider" aria-hidden="true"></div>
    </div>
  </section>

  <!-- ===== FOOTER ===== -->
  <footer aria-labelledby="about-title">
    <div class="wrap footer-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px">
      <div>
        <h4 id="about-title" style="margin:0 0 10px;color:#D4AF37">The Gir Travel Company</h4>
        <address>
          Near Sinh Sadan, Gir National Park,<br> Sasan Gir, Junagadh, Gujarat 362135
        </address>
      </div>
      <div>
        <h4 style="margin:0 0 10px;color:#D4AF37">Explore</h4>
        <p>
          <a href="/safaris">Safaris</a> • <a href="/journeys">Journeys</a> •
          <a href="/experiences">Experiences</a> • <a href="/gallery" aria-current="page">Gallery</a>
        </p>
      </div>
      <div>
        <h4 style="margin:0 0 10px;color:#D4AF37">Policies</h4>
        <p><a href="/policies">Booking & Cancellation • Child • Ethics</a></p>
      </div>
      <div id="contact">
        <h4 style="margin:0 0 10px;color:#D4AF37">Contact</h4>
        <p>Email: <a href="mailto:info@thegir.in">info@thegir.in</a><br>Phone: <a href="tel:+917624092647">+91 76240 92647</a></p>
      </div>
    </div>
    <div class="wrap" style="border-top:1px solid #4b1230;margin-top:18px;padding-top:12px;text-align:center;color:#cfcfcf">© <span id="year"></span> The Gir Travel Company. All rights reserved.</div>
  </footer>

  <script>
    // Sticky header
    const nav=document.getElementById('nav');
    const onScroll=()=>nav.classList.toggle('scrolled',window.scrollY>10);
    document.addEventListener('scroll',onScroll,{passive:true}); onScroll();

    // Mobile menu: open/close + focus trap + ESC
    const body=document.body;
    const burger=document.getElementById('hamburger');
    const panel=document.getElementById('mobPanel');
    const closeBtn=document.getElementById('closeMenu');
    let lastFocus=null;
    const getFocusable=()=>panel.querySelectorAll('a, button');

    function openMenu(){
      lastFocus=document.activeElement;
      body.classList.add('nav-open');
      burger.setAttribute('aria-expanded','true');
      panel.setAttribute('aria-hidden','false');
      const f=getFocusable(); if(f.length) f[0].focus();
      document.addEventListener('keydown',onKeydown);
    }
    function closeMenu(){
      body.classList.remove('nav-open');
      burger.setAttribute('aria-expanded','false');
      panel.setAttribute('aria-hidden','true');
      document.removeEventListener('keydown',onKeydown);
      if(lastFocus) lastFocus.focus();
    }
    function onKeydown(e){
      if(e.key==='Escape'){ e.preventDefault(); closeMenu(); }
      if(e.key==='Tab'){
        const f=Array.from(getFocusable()); if(!f.length) return;
        const first=f[0], last=f[f.length-1];
        if(e.shiftKey && document.activeElement===first){ e.preventDefault(); last.focus(); }
        else if(!e.shiftKey && document.activeElement===last){ e.preventDefault(); first.focus(); }
      }
    }
    burger.addEventListener('click',openMenu);
    if(closeBtn) closeBtn.addEventListener('click',closeMenu);
    panel.querySelectorAll('a').forEach(a=> a.addEventListener('click',closeMenu));

    // Footer year
    document.getElementById('year').textContent=new Date().getFullYear();

    // ===== Gallery filter logic =====
    const chips=document.getElementById('filterChips');
    const tiles=[...document.querySelectorAll('.gallery .tile')];
    chips.addEventListener('click',(e)=>{
      const btn=e.target.closest('.chip'); if(!btn) return;
      chips.querySelectorAll('.chip').forEach(c=>c.setAttribute('aria-pressed','false'));
      btn.setAttribute('aria-pressed','true');
      const cat=btn.dataset.filter;
      tiles.forEach(t=>{
        const match=(cat==='all') || (t.dataset.cat===cat);
        t.classList.toggle('hidden', !match);
      });
    });

    // ===== Lightbox =====
    const grid=document.getElementById('galleryGrid');
    const sources=[...grid.querySelectorAll('a.open')].map(a=>a.getAttribute('href'));
    let idx=0, touchStartX=null;

    const lb=document.createElement('div');
    lb.className='lightbox'; lb.innerHTML=`
      <div class="lb-frame">
        <img class="lb-img" alt="" />
        <div class="lb-cap"><span id="lbCaption"></span><span id="lbTag"></span></div>
        <button class="lb-close" aria-label="Close">✕</button>
        <button class="lb-prev" aria-label="Previous">‹</button>
        <button class="lb-next" aria-label="Next">›</button>
      </div>`;
    document.body.appendChild(lb);

    const lbImg=lb.querySelector('.lb-img');
    const lbCap=lb.querySelector('#lbCaption');
    const lbTag=lb.querySelector('#lbTag');
    const btnClose=lb.querySelector('.lb-close');
    const btnPrev=lb.querySelector('.lb-prev');
    const btnNext=lb.querySelector('.lb-next');

    function open(i){
      idx=i;
      const fig=grid.querySelector(`[data-index="${idx}"]`)?.closest('figure') || grid.querySelectorAll('figure')[idx];
      const cap=fig.querySelector('figcaption span')?.textContent || '';
      const tag=fig.querySelector('.tag')?.textContent || '';
      lbImg.src=sources[idx]; lbCap.textContent=cap; lbTag.textContent=tag;
      lb.classList.add('open');
      document.addEventListener('keydown',onLBKey);
    }
    function close(){ lb.classList.remove('open'); lbImg.src=''; document.removeEventListener('keydown',onLBKey); }
    function move(delta){ idx=(idx+delta+sources.length)%sources.length; open(idx); }

    function onLBKey(e){
      if(e.key==='Escape') close();
      if(e.key==='ArrowLeft') move(-1);
      if(e.key==='ArrowRight') move(1);
    }

    grid.addEventListener('click',(e)=>{
      const a=e.target.closest('a.open'); if(!a) return;
      e.preventDefault(); open(parseInt(a.dataset.index,10));
    });
    lb.addEventListener('click',(e)=>{ if(e.target===lb) close(); });
    btnClose.addEventListener('click',close);
    btnPrev.addEventListener('click',()=>move(-1));
    btnNext.addEventListener('click',()=>move(1));

    // Touch swipe
    lbImg.addEventListener('touchstart',(e)=>{ touchStartX=e.changedTouches[0].clientX; },{passive:true});
    lbImg.addEventListener('touchend',(e)=>{
      if(touchStartX===null) return;
      const dx=e.changedTouches[0].clientX - touchStartX;
      if(Math.abs(dx)>40){ move(dx>0?-1:1); }
      touchStartX=null;
    },{passive:true});
  </script>
</body>
</html>
